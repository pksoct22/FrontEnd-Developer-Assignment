<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Assignment</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    
     <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <script type="text/javascript">
      
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        var myObj = JSON.parse(this.responseText);
    var x='';
    key1 = new Array();
    key2 = new Array();
    key3 = new Array();
    key4 = new Array();
    key5 = new Array();
        for(var i=0;i<myObj["keyword 1"].points.length;i++)
    {
      key1[i] = myObj["keyword 1"].points[i];

    }
    for(var i=0;i<myObj["keyword 2"].points.length;i++)
    {
      key2[i] = myObj["keyword 2"].points[i];

    }
    for(var i=0;i<myObj["keyword 3"].points.length;i++)
    {
      key3[i] = myObj["keyword 3"].points[i];

    }
    for(var i=0;i<myObj["keyword 4"].points.length;i++)
    {
      key4[i] = myObj["keyword 4"].points[i];

    }
    
    for(var i=0;i<myObj["keyword 5"].points.length;i++)
    {
      key5[i] = myObj["keyword 5"].points[i];

    }
     fun(key1,key2,key3,key4,key5)
      document.getElementById("demo1").innerHTML = table ;
    }
};
xmlhttp.open("GET", "http://api.jsonbin.io/b/5b893b00db948c68635a04eb", true);
xmlhttp.send();

 function fun(key1,key2,key3,key4,key5) {
  var chart = new CanvasJS.Chart("chartContainer",
  {
    title: {
      text: "Load Data from API for points charts"
    },
    axisX: {
      labelFormatter: function (e) {
        return CanvasJS.formatDate( e.value, "DD MMM");
      },
    },
    
    data: [
    {
      type: "spline",
      dataPoints: [
        { x: new Date(2018, 8, 24), y: key1[0] },
        { x: new Date(2018, 8, 25), y: key1[1] },
        { x: new Date(2018, 8, 26), y: key1[2] },
          { x: new Date(2018, 8, 27), y: key1[3] },
        { x: new Date(2018, 8, 28), y: key1[4] },
        { x: new Date(2018, 8, 29), y: key1[5] },
        { x: new Date(2018, 8, 30), y: key1[6] }
      ]
    },
    {
      type: "spline",
      dataPoints: [
        { x: new Date(2018, 8, 24), y: key2[0] },
        { x: new Date(2018, 8, 25), y: key2[1] },
        { x: new Date(2018, 8, 26), y: key2[2] },
          { x: new Date(2018, 8, 27), y: key2[3] },
        { x: new Date(2018, 8, 28), y: key2[4] },
        { x: new Date(2018, 8, 29), y: key2[5] },
        { x: new Date(2018, 8, 30), y: key2[6] }
      ]
    }
    ,
    {
      type: "spline",
      dataPoints: [
        { x: new Date(2018, 8, 24), y: key3[0] },
        { x: new Date(2018, 8, 25), y: key3[1] },
        { x: new Date(2018, 8, 26), y: key3[2] },
          { x: new Date(2018, 8, 27), y: key3[3] },
        { x: new Date(2018, 8, 28), y: key3[4] },
        { x: new Date(2018, 8, 29), y: key3[5] },
        { x: new Date(2018, 8, 30), y: key3[6] }
      ]
    }
    ,
    {
      type: "spline",
      dataPoints: [
        { x: new Date(2018, 8, 24), y: key4[0] },
        { x: new Date(2018, 8, 25), y: key4[1] },
        { x: new Date(2018, 8, 26), y: key4[2] },
          { x: new Date(2018, 8, 27), y: key4[3] },
        { x: new Date(2018, 8, 28), y: key4[4] },
        { x: new Date(2018, 8, 29), y: key4[5] },
        { x: new Date(2018, 8, 30), y: key4[6] }
      ]
    }
    ,
    {
      type: "spline",
      dataPoints: [
        { x: new Date(2018, 8, 24), y: key5[0] },
        { x: new Date(2018, 8, 25), y: key5[1] },
        { x: new Date(2018, 8, 26), y: key5[2] },
          { x: new Date(2018, 8, 27), y: key5[3] },
        { x: new Date(2018, 8, 28), y: key5[4] },
        { x: new Date(2018, 8, 29), y: key5[5] },
        { x: new Date(2018, 8, 30), y: key5[6] }
      ]
    }
    ]                      
  }); 
  chart.render();
}
</script>

  
<script>

  function loadDoc() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      //document.getElementById("demo").innerHTML = this.responseText;
    var obj = JSON.parse(this.responseText);
    data = obj['data']
    var table = "<tr><th>Keyword</th><th>position</th><th>Change</th></tr>";
    var e = document.getElementById("number");
    var strUser = e.options[e.selectedIndex].value;
    
    for(i=0;i<strUser;i++)
    { 
    table += "<tr><td>"+data[i]['keyword']+"</td><td>"+data[i]['position']+"</td><td>"+data[i]['change']+"</td></tr>";
    }
    document.getElementById("demo").innerHTML = table;
    
    }
  };

  xhttp.open("GET", "http://api.jsonbin.io/b/5b893aa03ffac56f4bd7905a", true);
  xhttp.send();

}
</script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
  <body>
     <nav class="navbar navbar-default navbar-fixed-top">
         <div class="container">

           <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=" .navbar-collapse">
               <span class="sr-only"></span>
               <span class="icon-bar"></span>
               <span class="icon-bar"></span>
               <span class="icon-bar"></span>
           </button>
         </div>
     </nav>
     <br><br><br>
    <div class="container">
      <table border=1 id="demo1"></table>
      <div id="chartContainer" style="height: 300px; width: 100%;"></div>
    </div>
    <div class="container">
       <br/><br><br>Show Entries
        <select class="mdb-select md-form" id="number">
            <option value="" disabled selected>Choose your option</option>
            <option value="25" >25</option>
            <option value="50" >50</option>
            <option value="100">100</option>
            <option value="150">150</option>
            <option value="200">200</option>
            <option value="250">250</option>
            <option value="400">all</option>
        </select>
      <div class="table-responsive">
        <h3>Ranks</h3>
        <button type="button" onclick="loadDoc()">Load data from api</button>
          <br>
          <table class="table table-striped data-page-length='25' " id="demo">
            <tr>
              <th>Keyword</th>
               <th>Position</th>
              <th>Change</th>
            </tr>
          </table>
      </div>
    </div> 
  </body>
</html>
  
